# vue 渲染的原理

Vue 的渲染原理涉及到以下几个步骤：

1. 解析模板：Vue 会将 HTML 模板解析成虚拟 DOM（Virtual DOM），这个解析过程会建立一个抽象语法树（AST）来表示模板的结构和内容。

2. 编译模板：Vue 通过编译器将解析后的模板转换为渲染函数（render function），渲染函数是一个 JavaScript 函数，它返回一个虚拟 DOM 节点树。

3. 创建实例：当我们使用 Vue 构造函数创建一个 Vue 实例时，Vue 会创建一个实例对象，并调用渲染函数生成初始的虚拟 DOM 树。

4. 数据响应式：Vue 会将实例中的 data 数据进行响应式处理，在 data 数据上设置 getter 和 setter 来监听数据的变化，并建立依赖关系。

5. 首次渲染：Vue 会将初始的虚拟 DOM 树转化为真实的 DOM，并插入到页面中指定的目标位置。

6. 数据更新：当实例的数据发生改变时，Vue 会重新执行渲染函数生成新的虚拟 DOM 树，并通过 Diff 算法比较新旧虚拟 DOM 树的差异，然后只对差异部分进行更新，从而实现高效的 DOM 更新。

7. 更新视图：Vue 会将更新后的虚拟 DOM 转化为真实的 DOM，并更新到页面中，同时触发相应的生命周期钩子函数和响应式侦听器的回调函数。

总结起来，Vue 的渲染原理就是将模板解析成虚拟 DOM，然后通过渲染函数生成初次的虚拟 DOM 树，并建立数据的响应式关系。当数据改变时，重新执行渲染函数生成新的虚拟 DOM 树，然后通过 Diff 算法来高效地更新真实的 DOM，从而实现视图的更新。这种通过虚拟 DOM 的方式操作真实 DOM，使得视图的更新更加高效和快速。